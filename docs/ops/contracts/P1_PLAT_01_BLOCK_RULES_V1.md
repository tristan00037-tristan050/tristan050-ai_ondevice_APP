# P1-PLAT-01 Block Rules v1 (SSOT)

## 목적
PR-1에서 절대 하면 안 되는 것을 확정합니다 (실행팀 방식).

## PR-1 즉시 BLOCK 규칙

다음 중 **한 줄이라도 위반 시 중단**합니다.

### 1. 기본 DB가 네이티브(better-sqlite3)로 들어감
- **금지**: v0 기본은 sql.js 고정
- **허용**: sql.js 사용

### 2. 저장 후 필터(저장하고 나서 검사) 시도
- **금지**: 저장 후 필터링
- **원칙**: 저장 전에 meta-only 차단이 원칙

### 3. 멱등이 코드 if로만 처리되고 DB UNIQUE/PK 없음
- **금지**: 코드 레벨 if 문만으로 멱등 처리
- **필수**: DB UNIQUE 제약조건 또는 PRIMARY KEY로 멱등 보장

### 4. 접근 잠금이 0.0.0.0 바인딩 통과
- **금지**: 0.0.0.0 바인딩
- **필수**: 127.0.0.1 또는 인증 필수

### 5. X-Api-Key가 "존재만"으로 통과(값 매칭 없음)
- **금지**: 헤더 존재만 확인
- **필수**: 실제 API 키 값 매칭 검증

### 6. 동시성 검증이 순차 실행(가짜 동시성)
- **금지**: 순차 실행으로 동시성 시뮬레이션
- **필수**: Promise.all 동시 ingest만 인정

### 7. verify가 dist require에 의존(빌드 유입)
- **금지**: verify 스크립트가 dist 빌드 결과물에 의존
- **원칙**: verify는 판정만 수행 (빌드 없이 검증 가능해야 함)

